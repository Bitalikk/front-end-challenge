(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(t,e,n){t.exports={wrapper:"Post_wrapper__dmbng",postBody:"Post_postBody__12Ys2",commentList:"Post_commentList__2q_qu",commentItem:"Post_commentItem__3Vag9",btnBack:"Post_btnBack__29XT6",btn:"Post_btn__tbHBA"}},21:function(t,e,n){t.exports={formContainer:"PostEditor_formContainer__1Vqv7",inputContent:"PostEditor_inputContent__2SBKo",labelSelect:"PostEditor_labelSelect__SYi6a"}},27:function(t,e,n){t.exports={list:"PostsList_list__2_Qis",item:"PostsList_item__1kxC6",link:"PostsList_link__2ezKU"}},31:function(t,e,n){t.exports={backdrop:"Modal_backdrop__33VsG",modal:"Modal_modal__11h_y"}},47:function(t,e,n){t.exports=n(74)},74:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),c=n(22),r=n.n(c),s=n(15),i=n(19),l=n(16),u=n(8),E=n(9),_=n(11),S=n(10),p=n(12),d=n(24),m=n(31),T=n.n(m),C=function(t){function e(){var t,n;Object(u.a)(this,e);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(n=Object(_.a)(this,(t=Object(S.a)(e)).call.apply(t,[this].concat(c)))).backdropRef=Object(a.createRef)(),n.handleKeyPress=function(t){"Escape"===t.code&&n.props.onClose()},n.handleBackdropClick=function(t){var e=n.backdropRef.current;e&&t.target!==e||n.props.onClose()},n}return Object(p.a)(e,t),Object(E.a)(e,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){var t=this.props.children;return o.a.createElement("div",{className:T.a.backdrop,ref:this.backdropRef,onClick:this.handleBackdropClick},o.a.createElement("div",{className:T.a.modal},t))}}]),e}(a.Component),O=n(25),h=n(21),f=n.n(h),b=function(t){function e(){var t,n;Object(u.a)(this,e);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(_.a)(this,(t=Object(S.a)(e)).call.apply(t,[this].concat(o)))).state={title:n.props.title,body:n.props.body},n.handleChange=function(t){var e=t.target,a=e.name,o=e.value;n.setState(Object(O.a)({},a,o))},n.handleSubmit=function(t){t.preventDefault(),n.props.onSave(Object(d.a)({},n.state)),n.reset()},n}return Object(p.a)(e,t),Object(E.a)(e,[{key:"reset",value:function(){this.setState({title:"",body:""})}},{key:"render",value:function(){var t=this.state,e=t.title,n=t.body,a=this.props.onCancel;return o.a.createElement("form",{className:f.a.formContainer,onSubmit:this.handleSubmit},o.a.createElement("input",{className:f.a.inputContent,type:"text",name:"title",value:e,onChange:this.handleChange,placeholder:"Title"}),o.a.createElement("textarea",{placeholder:"Text",type:"text",name:"body",cols:"40",rows:"5",value:n,onChange:this.handleChange}),o.a.createElement("div",null,o.a.createElement("button",{type:"submit",className:f.a.btn},"Save"),o.a.createElement("button",{type:"button",className:f.a.btn,onClick:a},"Cancel")))}}]),e}(a.Component);b.defaultProps={title:"",body:""};var P=n(27),y=n.n(P),R=function(t){function e(){var t,n;Object(u.a)(this,e);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(_.a)(this,(t=Object(S.a)(e)).call.apply(t,[this].concat(o)))).state={isCreating:!1},n.openCreatePostModal=function(){n.setState({isCreating:!0})},n.closeCreatePostModal=function(){n.setState({isCreating:!1})},n.createPost=function(t){(0,n.props.addPost)(Object(d.a)({},t)),n.closeCreatePostModal()},n}return Object(p.a)(e,t),Object(E.a)(e,[{key:"render",value:function(){var t=this.props,e=t.items,n=void 0===e?[]:e,a=t.location,c=this.state.isCreating;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"Posts"),o.a.createElement("ul",{className:y.a.list},n.map(function(t){return t.title&&o.a.createElement("li",{key:t.id,className:y.a.item},o.a.createElement(i.b,{to:{pathname:"/posts/".concat(t.id),state:{from:a}},className:y.a.link},t.title))})),o.a.createElement("button",{type:"button",onClick:this.openCreatePostModal},"Create Post"),c&&o.a.createElement(C,{onClose:this.closeCreatePostModal},o.a.createElement(b,{onSave:this.createPost,onCancel:this.closeCreatePostModal})))}}]),e}(a.Component),v=n(17),D=n.n(v),M={FETCH_POSTS_REQUEST:"FETCH_POSTS_REQUEST",FETCH_POSTS_SUCCESS:"FETCH_POSTS_SUCCESS",FETCH_POSTS_ERROR:"FETCH_POSTS_ERROR",FETCH_POST_WITH_COMMENTS_REQUEST:"FETCH_POST_WITH_COMMENTS_REQUEST",FETCH_POST_WITH_COMMENTS_SUCCESS:"FETCH_POST_WITH_COMMENTS_SUCCESS",FETCH_POST_WITH_COMMENTS_ERROR:"FETCH_POST_WITH_COMMENTS_ERROR",ADD_POST_REQUEST:"ADD_POST_REQUEST",ADD_POST_SUCCESS:"ADD_POST_SUCCESS",ADD_POST_ERROR:"ADD_POST_ERROR",EDIT_POST_REQUEST:"EDIT_POST_REQUEST",EDIT_POST_SUCCESS:"EDIT_POST_SUCCESS",EDIT_POST_ERROR:"EDIT_POST_ERROR"},g=function(t){return t.posts.items},H=function(t){return t.posts.item},U={addPost:function(t){return function(e){e({type:M.ADD_POST_REQUEST}),D.a.post("https://simple-blog-api.crew.red/posts",t).then(function(t){var n;e((n=t.data,{type:M.ADD_POST_SUCCESS,payload:{post:n}}))}).catch(function(t){e(function(t){return{type:M.ADD_POST_ERROR,payload:{error:t}}}(t))})}}},k=Object(s.b)(function(t){return{items:g(t)}},U)(R),j=n(14),I=n.n(j),N=function(t){return t.match.params.id},w=function(t){function e(){var t,n;Object(u.a)(this,e);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(_.a)(this,(t=Object(S.a)(e)).call.apply(t,[this].concat(o)))).state={text:"",isEditing:!1,selectedPostId:null},n.handleGoBack=function(){var t=n.props,e=t.history,a=t.location;return a.state?e.push(a.state.from):e.push("/")},n.handleChange=function(t){n.setState({text:t.target.value})},n.handleSubmit=function(t){t.preventDefault();var e=n.props.addComment,a=n.state.text;e({postId:N(n.props),body:a}),n.reset()},n.openEditPostModal=function(){n.setState({isEditing:!0})},n.closeEditPostModal=function(){n.setState({isEditing:!1})},n.updatePost=function(t){var e=t.title,a=t.body;(0,n.props.editPost)(n.state.selectedPostId,{title:e,body:a}),n.closeEditPostModal()},n.reset=function(){n.setState({text:""})},n}return Object(p.a)(e,t),Object(E.a)(e,[{key:"componentDidMount",value:function(){var t=this.props.fetchPostWithComment,e=N(this.props);this.setState({selectedPostId:e}),t(e)}},{key:"render",value:function(){var t=this.props,e=t.items,n=t.comments,a=this.state,c=a.text,r=a.isEditing;return o.a.createElement("article",{className:I.a.wrapper},o.a.createElement("button",{type:"button",className:I.a.btnBack,onClick:this.handleGoBack},"Go back"),o.a.createElement("button",{type:"button",onClick:this.openEditPostModal},"Edit"),o.a.createElement("div",{className:I.a.postContainer},o.a.createElement("h2",null,e.title),o.a.createElement("p",{className:I.a.postBody},e.body),o.a.createElement("ul",{className:I.a.commentList},e.comments&&e.comments.map(function(t){return o.a.createElement("li",{key:t.id,className:I.a.commentItem},t.body)}),n&&n.map(function(t){return o.a.createElement("li",{key:t.id,className:I.a.commentItem},t.body)})),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("textarea",{type:"text",name:"text",cols:"50",rows:"5",value:c,onChange:this.handleChange}),o.a.createElement("button",{type:"submit",className:I.a.btn},"Add comment"))),r&&o.a.createElement(C,{onClose:this.closeEditPostModal},o.a.createElement(b,{onSave:this.updatePost,onCancel:this.closeEditPostModal,title:e.title,body:e.body})))}}]),e}(a.Component),F="ADD_COMMENT_REQUEST",A="ADD_COMMENT_SUCCESS",Q="ADD_COMMENT_ERROR",x=function(t){return t.comments.items},W={fetchPostWithComment:function(t){return function(e){e({type:M.FETCH_POST_WITH_COMMENTS_REQUEST}),D.a.get("https://simple-blog-api.crew.red/posts/".concat(t,"?_embed=comments")).then(function(t){var n;e((n=t.data,{type:M.FETCH_POST_WITH_COMMENTS_SUCCESS,payload:{post:n}}))}).catch(function(t){e(function(t){return{type:M.FETCH_POST_WITH_COMMENTS_ERROR,payload:{error:t}}}(t))})}},addComment:function(t){return function(e){e({type:F}),D.a.post("https://simple-blog-api.crew.red/comments",t).then(function(t){var n;e((n=t.data,{type:A,payload:{comment:n}}))}).catch(function(t){e(function(t){return{type:Q,payload:{error:t}}}(t))})}},editPost:function(t,e){return function(n){n({type:M.EDIT_POST_REQUEST}),D.a.put("https://simple-blog-api.crew.red/posts/".concat(t),e).then(function(t){var e,a;n((e=t.data,{type:M.EDIT_POST_SUCCESS,payload:{id:e,updatedPost:a}}))}).catch(function(t){n(function(t){return{type:M.EDIT_POST_ERROR,payload:{error:t}}}(t))})}}},B=Object(s.b)(function(t){return{items:H(t),comments:x(t)}},W)(w),L=function(t){function e(){return Object(u.a)(this,e),Object(_.a)(this,Object(S.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(E.a)(e,[{key:"componentDidMount",value:function(){(0,this.props.fetchPosts)()}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(l.c,null,o.a.createElement(l.a,{path:"/",exact:!0,component:k}),o.a.createElement(l.a,{path:"/posts/:id",component:B})))}}]),e}(a.Component),K={fetchPosts:function(){return function(t){t({type:M.FETCH_POSTS_REQUEST}),D.a.get("https://simple-blog-api.crew.red/posts").then(function(e){var n;t((n=e.data,{type:M.FETCH_POSTS_SUCCESS,payload:{posts:n}}))}).catch(function(e){t(function(t){return{type:M.FETCH_POSTS_ERROR,payload:{error:t}}}(e))})}}},G=Object(s.b)(null,K)(L),q=n(6),V=n(45),J=n(46),Y=n(26),z=Object(q.combineReducers)({items:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;switch(n){case M.FETCH_POSTS_SUCCESS:return a.posts;case M.ADD_POST_SUCCESS:return[].concat(Object(Y.a)(t),[a.post]);case M.EDIT_POST_SUCCESS:return t.map(function(t){return t.id===a.id?a.updatedPost:t});default:return t}},item:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;switch(n){case M.FETCH_POST_WITH_COMMENTS_SUCCESS:return a.post;default:return t}},loading:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case M.FETCH_POSTS_REQUEST:case M.FETCH_POST_WITH_COMMENTS_REQUEST:case M.ADD_POST_REQUEST:case M.EDIT_POST_REQUEST:return!0;case M.FETCH_POSTS_SUCCESS:case M.FETCH_POSTS_ERROR:case M.FETCH_POST_WITH_COMMENTS_SUCCESS:case M.FETCH_POST_WITH_COMMENTS_ERROR:case M.ADD_POST_SUCCESS:case M.ADD_POSTS_ERROR:case M.EDIT_POST_SUCCESS:case M.EDIT_POST_ERROR:return!1;default:return t}},error:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;switch(n){case M.FETCH_POSTS_REQUEST:case M.FETCH_POST_WITH_COMMENTS_REQUEST:case M.ADD_POST_REQUEST:case M.EDIT_POST_REQUEST:return null;case M.FETCH_POSTS_ERROR:case M.FETCH_POST_WITH_COMMENTS_ERROR:case M.ADD_POSTS_ERROR:case M.EDIT_POST_ERROR:return a.error;default:return t}}}),X=Object(q.combineReducers)({items:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;switch(n){case A:return[].concat(Object(Y.a)(t),[a.comment]);default:return t}},loading:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case F:return!0;case A:case Q:return!1;default:return t}},error:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;switch(n){case F:return null;case Q:return a.error;default:return t}}}),Z=Object(q.combineReducers)({posts:z,comments:X}),$=Object(q.createStore)(Z,Object(V.composeWithDevTools)(Object(q.applyMiddleware)(J.a)));r.a.render(o.a.createElement(s.a,{store:$},o.a.createElement(i.a,{basename:"/"},o.a.createElement(l.a,{component:G}))),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.9bb5f8f5.chunk.js.map